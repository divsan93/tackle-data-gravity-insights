<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Getting Started | Tackle-DGI</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Getting Started" /><meta property="og:locale" content="en_US" /><meta name="description" content="A Jekyll theme for documentation for DGI" /><meta property="og:description" content="A Jekyll theme for documentation for DGI" /><link rel="canonical" href="http://localhost:4000/docs/getting-started/" /><meta property="og:url" content="http://localhost:4000/docs/getting-started/" /><meta property="og:site_name" content="Tackle-DGI" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Getting Started" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A Jekyll theme for documentation for DGI","headline":"Getting Started","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/konveyor.png"}},"url":"http://localhost:4000/docs/getting-started/"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <img src="../../assets/images/tackle-img.png" width="250" height="250"><p style="color:white; margin-right: 15px">Assess, Prioritize, and Refactor Applications to Kubernetes</p><a href="https://github.com/konveyor/tackle-data-gravity-insights" class="navigation-list-link" >View the project on GitHub</a><p style="font-size: 10px; color:white; margin-top:0">konveyor/tackle-data-gravity-insights<p> <a class="github-button" href="https://github.com/konveyor/tackle-data-gravity-insights" data-icon="octicon-star" data-show-count="true" aria-label="Star konveyor/tackle-data-gravity-insights on GitHub">Star</a> <a class="github-button" href="https://github.com/konveyor/tackle-data-gravity-insights/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork konveyor/tackle-data-gravity-insights on GitHub">Fork</a><hr style="margin-bottom:20px; margin-top:10px"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="http://localhost:4000/docs/usage/" class="nav-list-link">Installation & Usage</a><li class="nav-list-item"><a href="http://localhost:4000/docs/prerequisites/" class="nav-list-link">Prerequisites</a><li class="nav-list-item active"><a href="http://localhost:4000/docs/getting-started/" class="nav-list-link active">Getting Started</a><li class="nav-list-item"><a href="http://localhost:4000/docs/demo/" class="nav-list-link">Demo</a><li class="nav-list-item"><a href="http://localhost:4000/docs/devlopment/" class="nav-list-link">Development</a><script async defer src="https://buttons.github.io/buttons.js"></script></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Tackle-DGI" aria-label="Search Tackle-DGI" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/konveyor/tackle-data-gravity-insights" class="site-button" > Tackle-DGI </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h1 id="getting-started-guide"> <a href="#getting-started-guide" class="anchor-heading" aria-labelledby="getting-started-guide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting Started Guide</h1><p>This guide will get you started using the various commands for Data Gravity Insights (DGI). If you would like to contribute to the project you can <a href="development.md">Set up your Development Environment</a>. Regular users can just follow the steps below:</p><h2 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites</h2><p>If this is your first time using Tackle Data Gravity Insights you must first install some prerequisite software. Here are the instructions to install the <a href="/docs/prerequisites.md">Prerequisites</a></p><h2 id="step-1-install-data-gravity-insights-cli"> <a href="#step-1-install-data-gravity-insights-cli" class="anchor-heading" aria-labelledby="step-1-install-data-gravity-insights-cli"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1. Install Data Gravity Insights CLI</h2><p>There are two ways to install the <code class="language-plaintext highlighter-rouge">dgi</code> command line interface:</p><h3 id="install-dgi-cli-system-wide"> <a href="#install-dgi-cli-system-wide" class="anchor-heading" aria-labelledby="install-dgi-cli-system-wide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install DGI CLI system wide</h3><p>You can install <code class="language-plaintext highlighter-rouge">dgi</code> globally into your system packages as root with:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pip <span class="nb">install </span>tackle-dgi
</code></pre></div></div><p>This will make the <code class="language-plaintext highlighter-rouge">dgi</code> command globally available. You can then run it from anywhere on your computer.</p><h3 id="install-dgi-cli-locally"> <a href="#install-dgi-cli-locally" class="anchor-heading" aria-labelledby="install-dgi-cli-locally"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install DGI CLI locally</h3><p>If you do not want to install it system wide you can install <code class="language-plaintext highlighter-rouge">dgi</code> locally with:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>tackle-dgi
</code></pre></div></div><p>This will install the <code class="language-plaintext highlighter-rouge">dgi</code> command locally under your home folder in a hidden folder called: <code class="language-plaintext highlighter-rouge">~/.local/bin</code>. If you choose this approach, you must add this folder to your <code class="language-plaintext highlighter-rouge">PATH</code> with:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/.local/bin
</code></pre></div></div><h3 id="run-neo4j-community-edition-container"> <a href="#run-neo4j-community-edition-container" class="anchor-heading" aria-labelledby="run-neo4j-community-edition-container"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run Neo4J Community Edition container</h3><p>You will need an instance of Neo4j to store the graphs that <code class="language-plaintext highlighter-rouge">dgi</code> creates. You can start one up in a container using <code class="language-plaintext highlighter-rouge">docker</code> or <code class="language-plaintext highlighter-rouge">podman</code> (to use <code class="language-plaintext highlighter-rouge">podman</code> just substitute <code class="language-plaintext highlighter-rouge">podman</code> for <code class="language-plaintext highlighter-rouge">docker</code> in the command below).</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker run <span class="nt">-d</span> <span class="nt">--name</span> neo4j <span class="se">\</span>
      <span class="nt">-p</span> 7474:7474 <span class="se">\</span>
      <span class="nt">-p</span> 7687:7687 <span class="se">\</span>
      <span class="nt">-v</span> neo4j:/data <span class="se">\</span>
      <span class="nt">-e</span> <span class="nv">NEO4J_AUTH</span><span class="o">=</span><span class="s2">"neo4j/tackle"</span> <span class="se">\</span>
      docker.io/neo4j:latest
</code></pre></div></div><p>You must set an environment variable to let <code class="language-plaintext highlighter-rouge">dgi</code> know where to find this neo4j container.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">NEO4J_BOLT_URL</span><span class="o">=</span><span class="s2">"bolt://neo4j:tackle@localhost:7687"</span>    
</code></pre></div></div><h3 id="installation-complete"> <a href="#installation-complete" class="anchor-heading" aria-labelledby="installation-complete"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation complete</h3><p>You can now use the <code class="language-plaintext highlighter-rouge">dgi</code> command to load information about your application into the graph database. We start with <code class="language-plaintext highlighter-rouge">dgi --help</code>. This should produce:</p><pre><code class="language-man">Usage: dgi [OPTIONS] COMMAND [ARGS]...

  Tackle Data Gravity Insights

Options:
  -n, --neo4j-bolt TEXT  Neo4j Bolt URL
  -q, --quiet            Be more quiet
  -c, --clear            Clear graph before loading  [default: True]
  --help                 Show this message and exit.

Commands:
  c2g   This command loads Code dependencies into the graph
  s2g   This command parses SQL schema DDL into a graph
  tx2g  This command loads DiVA database transactions into a graph
</code></pre><h2 id="step-2-setting-up-a-sample-application-to-analyze"> <a href="#step-2-setting-up-a-sample-application-to-analyze" class="anchor-heading" aria-labelledby="step-2-setting-up-a-sample-application-to-analyze"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2. Setting up a Sample Application to analyze</h2><p>This is a demonstration of the usage of DGI. For this, we’ll use <a href="https://github.com/WASdev/sample.daytrader7">daytrader7</a> as an example. Feel free to follow along with your own application and your personal directories. But, keep track of the <em>directories</em> where the application <em>source code</em> and the <em>built jar/war/ear</em> reside and replace them appropriately below.</p><p>Let’s download a copy of our sample application and build it. If you already have your own application ear file you can skip this step.</p><ol><li><p>First let’s create a folder called <code class="language-plaintext highlighter-rouge">demo</code> and change into it to extract the code to:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">mkdir </span>demo
 <span class="nb">cd </span>demo
</code></pre></div></div><li><p>If you have your own Java application, you can skip this step. If you want to use the DayTrader7 demo, you must load and extract the demo DayTrader7 application using <code class="language-plaintext highlighter-rouge">wget</code> (if you don’t have <code class="language-plaintext highlighter-rouge">wget</code> you can install it here: <a href="https://pypi.org/project/wget/">install wget</a>):</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> wget <span class="nt">-c</span> https://github.com/WASdev/sample.daytrader7/archive/refs/tags/v1.4.tar.gz <span class="nt">-O</span> - | <span class="nb">tar</span> <span class="nt">-xvz</span> <span class="nt">-C</span> <span class="nb">.</span>
</code></pre></div></div><li><p>Now build the application</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker run <span class="nt">--rm</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/sample.daytrader7-1.4:/build docker.io/maven:3.8.4-openjdk-8-slim mvn <span class="nt">--file</span><span class="o">=</span>/build/pom.xml <span class="nb">install</span>
</code></pre></div></div><p>This will create an EAR file called <code class="language-plaintext highlighter-rouge">daytrader-ee7-1.0-SNAPSHOT.ear</code> in <code class="language-plaintext highlighter-rouge">sample.daytrader7-1.4/daytrader-ee7/target</code> directory.</p></ol><h2 id="step-3-run-code2graph"> <a href="#step-3-run-code2graph" class="anchor-heading" aria-labelledby="step-3-run-code2graph"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3. Run code2graph</h2><p>In this step, we’ll run code2graph to populate the graph with various static code interaction features pertaining to object/dataflow dependencies and their respective lifecycle information.</p><p>Code2graph uses the output from a tool called <a href="https://bitbucket.org/yanniss/doop/src/master/">DOOP</a>.</p><ol><li><p>First let’s prepare an input and output folders for <code class="language-plaintext highlighter-rouge">doop</code> called <code class="language-plaintext highlighter-rouge">doop-input</code> and <code class="language-plaintext highlighter-rouge">doop-output</code> respectively and copy the generated <code class="language-plaintext highlighter-rouge">daytrader-ee7-1.0-SNAPSHOT.ear</code> file in the <code class="language-plaintext highlighter-rouge">doop-input</code> folder. You should already be in the <code class="language-plaintext highlighter-rouge">demo</code> folder from the previous steps before making these directories:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">mkdir </span>doop-input
 <span class="nb">mkdir </span>doop-output
 <span class="nb">cp </span>sample.daytrader7-1.4/daytrader-ee7/target/daytrader-ee7-1.0-SNAPSHOT.ear doop-input
</code></pre></div></div><p><em>Note: if you are using your own application ear file, copy it into the <code class="language-plaintext highlighter-rouge">doop-input</code> folder</em></p><p>Just to double check, you should see the DayTrader ear or your ear file in the <code class="language-plaintext highlighter-rouge">doop-input</code> folder:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">ls </span>doop-input/
 daytrader-ee7-1.0-SNAPSHOT.ear
</code></pre></div></div><li><p>Next, we’ll run DOOP to process the compiled <code class="language-plaintext highlighter-rouge">*.jar</code> files.</p><p>For ease of use, DOOP has been pre-compiled and hosted as a docker image at <code class="language-plaintext highlighter-rouge">quay.io/rkrsn/doop-main</code>. We’ll use that for this demo.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/doop-input:/root/doop-data/input <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/doop-output:/root/doop-data/output quay.io/rkrsn/doop-main:latest rundoop
</code></pre></div></div><p><em>Note: Running DOOP may roughly takes 5-6 mins</em></p><p>Let’s review what we have done so far:</p><ul><li><p>We used the <code class="language-plaintext highlighter-rouge">doop-input/</code> folder to store the the compiled jars, wars, and ears</p><li><p>We used a new folder <code class="language-plaintext highlighter-rouge">doop-output</code> to save all the information (formatted as *.csv files) gathered from DOOP.</p></ul><li><p>After gathering the data with DOOP, we’ll now run code2graph to synthesize DOOP output into a graph stored on neo4j.</p><p>The syntax for code2graph can be see with <code class="language-plaintext highlighter-rouge">dgi c2g --help</code>. Below:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>dgi c2g
    
 Usage: dgi c2g <span class="o">[</span>OPTIONS]

   This <span class="nb">command </span>loads Code dependencies into the graph

 Options:
   <span class="nt">-i</span>, <span class="nt">--input</span> DIRECTORY           DOOP output facts directory.  <span class="o">[</span>required]
   <span class="nt">-a</span>, <span class="nt">--abstraction</span> <span class="o">[</span>class|method|full]
                                   The level of abstraction to use when
                                   building the graph  <span class="o">[</span>default: class]
   <span class="nt">--help</span>                          Show this message and exit.
</code></pre></div></div><p>We’ll run code2graph by pointing it to the doop generated facts from the step above:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> dgi <span class="nt">--clear</span> c2g <span class="nt">--abstraction</span><span class="o">=</span>class <span class="nt">--input</span><span class="o">=</span>doop-output
</code></pre></div></div><div class="table-wrapper"><table><tbody><tr><td>Note that we could have passed in [class<td>method<td>full] as the abstraction. If you decide to run with the <code class="language-plaintext highlighter-rouge">method</code> or <code class="language-plaintext highlighter-rouge">full</code> level of abstraction, make sure you use the same abstraction level when running with <code class="language-plaintext highlighter-rouge">tx2g</code> as well.</table></div><p>After successful completion, you should see:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>dgi <span class="nt">--clear</span> c2g <span class="nt">--abstraction</span><span class="o">=</span>class <span class="nt">--input</span><span class="o">=</span>doop-output
 code2graph generator started...
 Verbose mode: ON
 Building Graph...
 <span class="o">[</span>INFO] Populating heap carried dependencies edges
 100%|█████████████████████| 7138/7138 <span class="o">[</span>01:37&lt;00:00, 72.92it/s]
 <span class="o">[</span>INFO] Populating dataflow edges
 100%|█████████████████████| 5022/5022 <span class="o">[</span>01:31&lt;00:00, 54.99it/s]
 <span class="o">[</span>INFO] Populating call-return dependencies edges
 100%|█████████████████████| 7052/7052 <span class="o">[</span>02:26&lt;00:00, 48.30it/s]
 <span class="o">[</span>INFO] Populating entrypoints
 code2graph build <span class="nb">complete</span>
</code></pre></div></div></ol><h2 id="step-4-running-schema2graph"> <a href="#step-4-running-schema2graph" class="anchor-heading" aria-labelledby="step-4-running-schema2graph"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4. Running schema2graph</h2><p>To run scheme to graph, use <code class="language-plaintext highlighter-rouge">dgi [OPTIONS] s2g --input=&lt;path/to/ddl&gt;</code>. For this demo, we have a sample DDL for daytrader at <code class="language-plaintext highlighter-rouge">demo/schema2graph-samples/daytrader-orcale.ddl</code>, let us use that:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dgi <span class="nt">--clear</span> s2g <span class="nt">--input</span><span class="o">=</span>./sample.daytrader7-1.4/daytrader-ee7-web/src/main/webapp/dbscripts/oracle/Table.ddl
</code></pre></div></div><p>This should give us:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Clearing graph...
Building Graph...
Processing schema tables:
100%|████████████████████| 12/12 <span class="o">[</span>00:00&lt;00:00, 69.40it/s]
0it <span class="o">[</span>00:00, ?it/s]
Processing foreign keys:
Graph build <span class="nb">complete</span>
</code></pre></div></div><h2 id="step-5-populating-database-transactions-with-diva"> <a href="#step-5-populating-database-transactions-with-diva" class="anchor-heading" aria-labelledby="step-5-populating-database-transactions-with-diva"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 5. Populating Database Transactions with DiVA</h2><p>Here we’ll first use <a href="https://github.com/konveyor/tackle-diva">Tackle-DiVA</a> to infer transaction traces from the source code. DiVA is available as a docker image, so we just need to run DiVA by pointing to the source code directory and the desired output directory (for which we’ll user the demo folder again).</p><ol><li><p>Run the following command to get the transaction traces from DiVA:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">mkdir </span>tx2graph-output
 docker run <span class="nt">--rm</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/sample.daytrader7-1.4:/app <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/tx2graph-output:/diva-distribution/output quay.io/konveyor/tackle-diva
</code></pre></div></div><p>This should output 6 files in the <code class="language-plaintext highlighter-rouge">./tx2graph-output</code> folder. One of these will be a json file called <code class="language-plaintext highlighter-rouge">transaction.json</code> with all the transactions.</p><li><p>We’ll now run DGI’s <code class="language-plaintext highlighter-rouge">tx2g</code> command to populate the graph with SQL tables, transaction data, and their relationships to the code.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dgi <span class="nt">--clear</span> tx2g <span class="nt">--input</span><span class="o">=</span>./tx2graph-output/transaction.json
</code></pre></div></div><p>After a successful run, you’ll see:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Verbose mode: ON
<span class="o">[</span>INFO] Clear flag detected... Deleting pre-existing SQLTable nodes.
Building Graph...
<span class="o">[</span>INFO] Populating transactions
100%|████████████████████| 158/158 <span class="o">[</span>00:01&lt;00:00, 125.73it/s]
Graph build <span class="nb">complete</span>
</code></pre></div></div></ol><h2 id="step-6-optional-creating-an-offline-dump-of-the-neo4j-dgi-graph"> <a href="#step-6-optional-creating-an-offline-dump-of-the-neo4j-dgi-graph" class="anchor-heading" aria-labelledby="step-6-optional-creating-an-offline-dump-of-the-neo4j-dgi-graph"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6. (Optional) Creating an offline dump of the neo4j DGI graph</h2><p>We’ll save the graph generated so far locally for further analysis. This enables us to use a free version of Neo4J Bloom to interact with the graph.</p><ol><li><p>First we stop the neo4j container because the data can’t be backup while Neo4J is running.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stop neo4j
</code></pre></div></div><li><p>Then, we’ll use <code class="language-plaintext highlighter-rouge">neo4j-admin</code> command to dump the DB.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--rm</span> <span class="nt">-v</span> neo4j:/data <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:/var/dump neo4j bin/neo4j-admin dump <span class="nt">--to</span><span class="o">=</span>/var/dump/DGI.dump
</code></pre></div></div><p>You’ll now find a <code class="language-plaintext highlighter-rouge">DGI.dump</code> file, which has the entire DB with code2graph, schema2graph, and tx2graph in your current folder.</p><li><p>If you want to continue to use <code class="language-plaintext highlighter-rouge">dgi</code> with Neo4J don’t forget to restart Neo4J:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start neo4j
</code></pre></div></div></ol><h2 id="using-neo4j-desktop-explore-the-graph"> <a href="#using-neo4j-desktop-explore-the-graph" class="anchor-heading" aria-labelledby="using-neo4j-desktop-explore-the-graph"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Neo4J Desktop explore the graph</h2><p>In order to explore the neo4j graph, visit <a href="http://localhost:7474/browser/">http://localhost:7474/browser/</a>. Then,</p><ul><li><p>Under connect URL, select <code class="language-plaintext highlighter-rouge">neo4j://</code> and enter: <code class="language-plaintext highlighter-rouge">localhost:7687</code></p><li><p>Under username, enter: <code class="language-plaintext highlighter-rouge">neo4j</code></p><li><p>Under password, enter: <code class="language-plaintext highlighter-rouge">tackle</code></p></ul><p>This should bring you to the browser page where you can explore the DGI graph.</p><p><img src="../../assets/images/full_graph.png" alt="full_graph" /></p><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><div class="d-flex mt-2"></div></footer></div></div><div class="search-overlay"></div></div>
